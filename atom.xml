<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Stride Max Zz</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://zzylydx.github.io/"/>
  <updated>2020-02-11T12:17:32.883Z</updated>
  <id>http://zzylydx.github.io/</id>
  
  <author>
    <name>zzy</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>有关Bitcoin的椭圆曲线-secp256k1</title>
    <link href="http://zzylydx.github.io/2020/02/11/%E6%9C%89%E5%85%B3Bitcoin%E7%9A%84%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF-secp256k1/"/>
    <id>http://zzylydx.github.io/2020/02/11/%E6%9C%89%E5%85%B3Bitcoin%E7%9A%84%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF-secp256k1/</id>
    <published>2020-02-11T12:33:40.000Z</published>
    <updated>2020-02-11T12:17:32.883Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>椭圆曲线加密法是一种基于离散对数问题的非对称（或公钥） 加密法， 可以用对椭圆曲线上的点进行加法或乘法运算来表达。在Bitcoin中使用的是secp256k1这条椭圆曲线</p><a id="more"></a><h2 id="椭圆曲线"><a href="#椭圆曲线" class="headerlink" title="椭圆曲线"></a>椭圆曲线</h2><ul><li>y^2^mod p = x^2^ +ax+b mod p</li><li>a、b满足：4a^3^+27b^2^ mod p!=0 这保证了x^3^+ax+b不包含重复的因子，所以该曲线就可用于生成一个群组</li><li>在一个有限域Fp，素数阶p的有限域内</li><li>p=2^256^-2^32^-2^9^-2^8^-2^7^-2^6^-2^4^-1</li></ul><h2 id="椭圆曲线上的加法"><a href="#椭圆曲线上的加法" class="headerlink" title="椭圆曲线上的加法"></a>椭圆曲线上的加法</h2><p>P3=P1+P2<br>计算方法：P1和P2之间画一条线，恰好与椭圆曲线上的一点相交，记此点为：P3’=(x,y)，然后再x轴做映射的：P3=(x,-y)</p><h2 id="特殊的情况"><a href="#特殊的情况" class="headerlink" title="特殊的情况"></a>特殊的情况</h2><ul><li>P1与P2为同一点，P1和P2之间的连线为P1的切线，曲线上有且只有一个新的点与该切线相交</li><li>P1和P2具有相同的x值，但不同的y值，则切线会垂直，这种情况下，P3=“无穷远点”</li><li>若一点是无穷远点，则与其相加不变，无穷远点类比0处理</li></ul><h2 id="secp256k1"><a href="#secp256k1" class="headerlink" title="secp256k1"></a>secp256k1</h2><p>y^2^=x^3^+ax+b，其中a=0且b=7，就是曲线secp256k1<br>G是生成元，n是G的素数阶<br>则任取k，Q=k*G，则k为私钥，Q为公钥</p><h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ul><li>占用很少的带宽和存储资源，秘钥的长度很短</li><li>让所有的用户都可以使用同样的操作完成域运算</li></ul><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>今天看了一些关于BrainWellets的东西，感觉还蛮有意思的，明天要把它的来龙去脉都讲清楚了，技术尽量去看吧，然后再把整个PPT从头到尾慢慢品尝。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;椭圆曲线加密法是一种基于离散对数问题的非对称（或公钥） 加密法， 可以用对椭圆曲线上的点进行加法或乘法运算来表达。在Bitcoin中使用的是secp256k1这条椭圆曲线&lt;/p&gt;
    
    </summary>
    
    
      <category term="小知识" scheme="http://zzylydx.github.io/categories/%E5%B0%8F%E7%9F%A5%E8%AF%86/"/>
    
    
      <category term="secp256k1" scheme="http://zzylydx.github.io/tags/secp256k1/"/>
    
  </entry>
  
  <entry>
    <title>BrainWallets</title>
    <link href="http://zzylydx.github.io/2020/02/11/Brain%20Wallets/"/>
    <id>http://zzylydx.github.io/2020/02/11/Brain%20Wallets/</id>
    <published>2020-02-11T04:33:40.000Z</published>
    <updated>2020-02-11T12:10:02.954Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>今天粗读了这篇短论文：<a href="https://fc16.ifca.ai/preproceedings/36_Vasek.pdf" target="_blank" rel="noopener">2016The Bitcoin Brain Drain-A Short Paper on the Use and Abuse of Bitcoin Brain Wallets</a>大体了解了在比特币网络中使用BrainWallets的坏处，作者建议不要使用BrainWallets，这也是大脑钱包官网关闭的原因吧</p><a id="more"></a><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>用户自己选定一些对自己有意义且能记住的字符串，然后通过简单地hash就可以生成自己的私钥，私钥经过两次哈希计算得到的值再经过base58编码即可得到address。说的有些粗略了，明天再补。。。<br>在BrainWallets中大体原理就像昨天说的这样，这也是为什么大脑钱包会被人们接收并使用，因为这样的方式确实方便人们使用比特币钱包，通过记住有意义的字符串，在使用的时候生成私钥就可以了，而不需要去记住繁琐且冗长的私钥，但是同样的字符串就会生成相同的私钥，因为它的生成机制就是这样，并且用户的地址在比特币网络中公开，无论是谁都可以得到你的address，这也是容易受到攻击的原因吧，所以攻击者们就利用这点对用户的私钥进行破译。作者使用的是：<a href="https://rya.nc/brainflayer" target="_blank" rel="noopener">brainflayer</a>进行研究的。</p><h2 id="密码语料库"><a href="#密码语料库" class="headerlink" title="密码语料库"></a>密码语料库</h2><p>3000亿个候选密码，分别如下：<br>1.英语：Ubuntu 12.04附带的英语单词列表。<br>2.城市词典：来自人群的crowd语词典中的术语和短语7。 “ \ combinator工具用于检查所有成对的词。<br>3.两个单词：使用组合工具的英文单词对。<br>4.英语/ S语城市词典：城市词典中的单个单词条目与英语单词结合在一起。此外，运行结果通过组合工具可搜索所有长度不超过20个字符的短语。<br>5.英文维基百科<br>6.维基语录：2013年3月3日的英语，西班牙语，俄语和德语语录。<br>7.短语：WikiQuote，Wikipedia和Naxxatoe短语的排列。<br>8. xkcd：2014年7月10日从三个来源获得的列表8。组合方式最多三个词，带空格和不带空格。所有单词用于2个单词组合；这三个列表共同使用的所有单词，用于3个单词组合。<br>9.歌词：可从<a href="https://andymoore.info/购买的歌词和歌曲标题mysql-lyrics-database" target="_blank" rel="noopener">https://andymoore.info/购买的歌词和歌曲标题mysql-lyrics-database</a> /。<br>10. Blockchain.info标签：从https获取的所有公共比特币地址标签： //blockchain.info/tags。<br>11.密码转储LinkedIn，MySpace，RockYou，Rootkit.com<br>12. Leet MRL：MySpace，Rockyou和LinkedIn的重复数据删除合并（因此MRL）转储，并使用精讲替代品。<br>13. Prince MRL：应用Prince攻击的MRL列表。<br>14.安全行业列表：CrackStation，Naxxatoe，Uniqpass（组合2012-01-01和2012-04-01列表），Skull Security9（RockYou列表除外）<br>通过使用<a href="https://rya.nc/brainflayer" target="_blank" rel="noopener">brainflayer</a>进行测试，与从比特币网络中提取出的地址进行比对，或者是排列组合，下面举几个例子：<br>6e24b1342852a8e4af3c63206f8b2266ba887ef6:u:str:1234<br>ec42ad7fd54f931274b83f6137379206e458b106:u:str:1satoshi<br>那些很长的数字密码都能被破解:<br>09b508bae503da42f05575891866d0072bcf65f6:u:str:011235813213455<br>32f6ace81715e0872e6db7ff4a280185205620a3:u:str:12345678901234567890<br>afe66e0314eb15a5cd01d95b94166ce995c3347d:u:str:000000000000000000000000000000<br>字母密码看起来15位以内的都没用，破解了太多了。<br>482bc0946efa74a5a3d005e693b2774e1aeb7dad:u:str:qwertyuiopasdfghjklzxcvbnm<br>4b1b231e9caa7f95d51ed7c99df68a5add5a1714:u:str:doandroidsdreamofelectricsheep<br>bf1f119153f6ecedb259f0043f9fbbc88687b22e:u:str:thepastisagrotesqueanimal<br>再看看有些很长的密码都能破解，有点心惊。<br>ac8dc3fcfa4e9e91dddfc0c3fe6d7e0021292036:u:str:may the force be with you<br>8b0a993126c3bf8f4b28c8264b553d6aa39f2956:u:str:Money is the root of all evil.<br>1622dc9d9e5423d7b84122f9ef7edfa1981d9960:u:str:nothing ventured nothing gained<br>0c7cdc2d447af8d422dd2b54cab2f274ca88131d:u:str:No one can make you feel inferior without your consent.<br>8ee2d47121c480c37f9dd0a88bddf2dc21b284da:u:str:The quick brown fox jumped over the lazy dog.<br>2029758fa9d81f9c36f4be2ab8696ad10fc602f8:u:str:The quick brown fox jumps over the lazy dog<br>838edc90c250d298fc115bf028164f105e228fb9:u:str:these aren’t the droids you’re looking for<br>8c4cfbd55dd01f6c221372eba1e57c7496d7239f:u:str:This is the way the world ends.<br>31ae15fc484cf5fd34ecd49e1afb51e3f2174a93:u:str:tomb-of-the-unknown-soldier-identification-badge<br>还有中文名做密码的<br>7afa3b687e58d3f16feccb8244b90a87a535b85c:u:str:试试看<br>73b1bebd338fc051dba7282d4f99846fac01df23:u:str:中国上海<br>这些结果转载自：<a href="http://www.huangzhong.ca/zh/bitcoin-brainwallet-cracking-tools/" target="_blank" rel="noopener">脑钱包破解工具实测</a></p><h2 id="存在一些值的注意的字符串"><a href="#存在一些值的注意的字符串" class="headerlink" title="存在一些值的注意的字符串"></a>存在一些值的注意的字符串</h2><ul><li>one two three four five six seven</li><li>“”</li><li>how much wood could a woodchuck chuck if a woodchuck could<br>chuck wood<br>比如这上面的字符串就很容易破解，等等</li></ul><h2 id="怎样确定BrainWallets被盗"><a href="#怎样确定BrainWallets被盗" class="headerlink" title="怎样确定BrainWallets被盗"></a>怎样确定BrainWallets被盗</h2><p>作者通过对比特币网络中大脑钱包资金的流失速度进行统计发现了一些东西。<br>大脑钱包里面的资金流失速度非常快，通过统计发现一半的脑钱包的资金在21分钟之内耗尽，几乎所有的脑钱包中的资金在24小时内耗尽，其中有一些是由大脑钱包的所有者发起的，但是绝大多数情况并非如此。</p><h2 id="发现drainers"><a href="#发现drainers" class="headerlink" title="发现drainers"></a>发现drainers</h2><p>作者通过研究发现确实存在一些针对大脑钱包的drainers，并且在论坛中得到了证实。许多机器人监控新交易存入一直私钥的脑钱包中，会迅速将钱汇到自己的账户地址中去，如果都使用了相同的地址，这使得研究人员更容易记录他们的活动。</p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>不要使用大脑钱包，密码较弱的大脑钱包破译速度将更加迅速。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;今天粗读了这篇短论文：&lt;a href=&quot;https://fc16.ifca.ai/preproceedings/36_Vasek.pdf&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;2016The Bitcoin Brain Drain-A Short Paper on the Use and Abuse of Bitcoin Brain Wallets&lt;/a&gt;大体了解了在比特币网络中使用BrainWallets的坏处，作者建议不要使用BrainWallets，这也是大脑钱包官网关闭的原因吧&lt;/p&gt;
    
    </summary>
    
    
      <category term="Bitcoin" scheme="http://zzylydx.github.io/categories/Bitcoin/"/>
    
    
      <category term="BrainWallets" scheme="http://zzylydx.github.io/tags/BrainWallets/"/>
    
  </entry>
  
  <entry>
    <title>Blockchainr源码剖析</title>
    <link href="http://zzylydx.github.io/2020/02/08/Blockchainr%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/"/>
    <id>http://zzylydx.github.io/2020/02/08/Blockchainr%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/</id>
    <published>2020-02-08T09:33:40.000Z</published>
    <updated>2020-02-10T12:11:21.840Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在<a href="https://conference.hitb.org/hitbsecconf2014kul/materials/D1T1%20-%20Filippo%20Valsorda%20-%20Exploiting%20ECDSA%20Failures%20in%20the%20Bitcoin%20Blockchain.pdf" target="_blank" rel="noopener">2014HITB-Exploiting ECDSA Failures in the Bitcoin Blockchain</a>中他所使用提取签名的方法是通过Bloomfilter实现的，作者提到：</p><ul><li>first pass：把签名添加到Bloomfilter里面，作者所使用的是：<a href="https://github.com/bitly/dablooms" target="_blank" rel="noopener">dablooms</a>，如果过滤器中已经存在了该签名，则把该签名放到一个map中叫做：potentialValues</li><li>second pass：重新遍历signature，如果签名存在于potentialValues中，导出签名以及它的其他信息到map：rMap中</li></ul><hr><a id="more"></a><h4 id="小故事"><a href="#小故事" class="headerlink" title="小故事"></a>小故事</h4><p>最近看的这篇PPT，他主要是探讨的在Bitcoin中同一用户使用相同的随机数k会造成私钥的泄漏，进而造成账户金额被盗等重大问题。作者举了几个例子：</p><ul><li>索尼以前就犯过这样的错误：PlayStation 3 只能运行被索尼的进行ECDSA签名的游戏。如果我想为PlayStation 3开发了一个新的游戏，除非我从索尼获得签名值，否则我及时发布了，也运行不了这个游戏。问题是，索尼签名时用了一个静态的k值而不是随机生成的，这就可以根据相同的k进行破解从而得到私钥，进而任意发布游戏。<br><img src="/images/sony.png" alt="Sony&#39;s ECDSA code"></li><li>有人报告了他们的比特币被盗，并发送至地址：<a href="https://blockchain.info/address/1HKywxiL4JziqXrzLKhmB6a74ma6kxbSDj" target="_blank" rel="noopener">https://blockchain.info/address/1HKywxiL4JziqXrzLKhmB6a74ma6kxbSDj</a> 您可以看到该地址当前包含55.82152538被盗硬币。已经注意到，在客户通过重新使用相同的随机数来不正确地签署交易后的几个小时内，所有硬币都被转移了。<br><img src="/images/beidao.png" alt="stealer"> <a href="https://bitcointalk.org/index.php?topic=271486" target="_blank" rel="noopener">新闻链接</a></li><li>Android漏洞<br><img src="/images/Android.png" alt="Android"></li></ul><hr><p>下面具体展开对源码的剖析</p><h2 id="blockchainr"><a href="#blockchainr" class="headerlink" title="blockchainr"></a>blockchainr</h2><h3 id="代码整体架构"><a href="#代码整体架构" class="headerlink" title="代码整体架构"></a>代码整体架构</h3><ul><li>main函数</li><li>btcdbSetup函数</li><li>getSignatures函数</li><li>search函数</li></ul><h4 id="getSignature"><a href="#getSignature" class="headerlink" title="getSignature"></a>getSignature</h4><p>此函数的目的是导出区块中所有的Signature，作者定义了一个结构体，用于存放与签名相关的信息</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">type rData <span class="class"><span class="keyword">struct</span> &#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">sig  *btcec.Signature</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">H    int64</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">Tx   <span class="keyword">int</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">TxIn <span class="keyword">int</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">Data <span class="keyword">int</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><ul><li>sig：签名(包含r、s)</li><li>H：交易所在区块的高度</li><li>Tx：区块中的第几笔交易</li><li>TxIn：交易中第几个TxIn</li><li>Data：</li></ul><p>该函数的返回值是这个类型：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="function">func <span class="title">getSignatures</span><span class="params">(maxHeigth int64, <span class="built_in">log</span> btclog.Logger, db btcdb.Db)</span> chan *rData </span>&#123;&#125;</span></pre></td></tr></table></figure><p>具体过程就不说了，它主要就是通过一层层的循环将数据导出的(思想如下)：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> block in chain:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> tx in block:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> input in tx:</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">...</span></pre></td></tr></table></figure><h4 id="search函数"><a href="#search函数" class="headerlink" title="search函数"></a>search函数</h4><p>使用dablooms这个Bloom过滤器，设置了容量、错误率等，都定义了常量</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> (</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">tickFreq  = <span class="number">10</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">bloomSize = <span class="number">100000000</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">bloomRate = <span class="number">0.005</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">)</span></pre></td></tr></table></figure><p>这里作者设置的容量是100000000，我觉得在2014年这个数据容量应该足够了</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">filter := dablooms.NewScalingBloom(bloomSize, bloomRate, <span class="string">"blockchainr_bloom.bin"</span>)</span></pre></td></tr></table></figure><p>主要的提取过程前面提到了分为两步代码如下：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">step</span> == <span class="number">1</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">b := rd.sig.R.Bytes()</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> filter.Check(b) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">matches++</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">potentialValues.Add(rd.sig.R.<span class="keyword">String</span>())</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">&#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> !filter.Add(b, <span class="number">1</span>) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">log</span>.Warn(<span class="string">"Add failed (?)"</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="built_in">step</span> == <span class="number">2</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> potentialValues.Contains(rd.sig.R.<span class="keyword">String</span>()) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">matches++</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">rMap[rd.sig.R.<span class="keyword">String</span>()] = append(rMap[rd.sig.R.<span class="keyword">String</span>()], rd)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><p>Signatures是调用getSignatures获得的，前文有提到过</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">signatures := getSignatures(maxHeigth, <span class="built_in">log</span>, db)<span class="comment">//获取签名</span></span></pre></td></tr></table></figure><ul><li>第一步，通过循环导出的signatures将签名R赋值给b然后通过过滤器过滤，判断签名是否在过滤器中出现过，如果出现过那么就把它添加到potentialValues中</li><li>第二步，再一次循环signatures判断R是否存在于第一步生成的集合potentialValues中，如果存在将其详细信息添加到rMap中，键值是签名R，也就是说如果存在重复的R就会添加进去多组相关信息。说一下rMap的类型：</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">rMap := make(<span class="built_in">map</span>[<span class="built_in">string</span>][]*rData)</span></pre></td></tr></table></figure><p>key是string类型，value是rData类型的集合，所以它的索引中存储的是签名R，value是一个存储多组R的相关信息的集合，这样的话前面我说的应该也就明白了。最后search函数返回rMap</p><h4 id="main函数"><a href="#main函数" class="headerlink" title="main函数"></a>main函数</h4><p>首先给出了区块数据的路径以及数据库类型：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">var (</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">dataDir = flag.<span class="keyword">String</span>(<span class="string">"datadir"</span>, filepath.Join(btcutil.AppDataDir(<span class="string">"btcd"</span>, <span class="literal">false</span>), <span class="string">"data"</span>), <span class="string">"BTCD: Data directory"</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">dbType  = flag.<span class="keyword">String</span>(<span class="string">"dbtype"</span>, <span class="string">"leveldb"</span>, <span class="string">"BTCD: Database backend"</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">)</span></pre></td></tr></table></figure><p>之后通过btcdbSetup函数设置了btcdb：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">log</span>, db, dbCleanup := btcdbSetup(*dataDir, *dbType)</span></pre></td></tr></table></figure><p>再调用search函数导出区块中重复签名R以及它们的相关信息</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">duplicates := search(<span class="built_in">log</span>, db)<span class="comment">//返回值是rMap</span></span></pre></td></tr></table></figure><p>作者新定义一个与导出集合类型一致的map，(value是存储的该签名R相关的信息的一个数组，也就是说存储着多组不同的rData)这段代码非常重要，是作者整个思想的核心，通过循环判断value数组的长度是否大于一，若是则证明签名R是重复的，若不是则签名R不重复。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">realDuplicates := make(<span class="built_in">map</span>[<span class="built_in">string</span>][]*rData)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> k, v := range duplicates &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> len(v) &gt; <span class="number">1</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">realDuplicates[k] = v</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><p>最后将上文代码中的realDuplicates导出成文件，至此完成了整个比特币网络中相同签名R及其相关信息的导出。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>作者阐述通过一系列的公式验算以及相关的新闻，我们不难发现这种根据相同的签名R来盗取比特币的行为确实存在过，所以我们知道了k的重要性，一定要保证k值的保密性、唯一性，文章后面一部分作者提到了解决方法，在生成随机数k的时候使用RFC 6979，k=SHA256(d + HASH(m))，通过私钥d，和消息m来生成随机数k，这样的话，d保证了其保密性，hash(m)又保证了其唯一性，所以整个公式已经满足了我们的需要。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;在&lt;a href=&quot;https://conference.hitb.org/hitbsecconf2014kul/materials/D1T1%20-%20Filippo%20Valsorda%20-%20Exploiting%20ECDSA%20Failures%20in%20the%20Bitcoin%20Blockchain.pdf&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;2014HITB-Exploiting ECDSA Failures in the Bitcoin Blockchain&lt;/a&gt;中他所使用提取签名的方法是通过Bloomfilter实现的，作者提到：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;first pass：把签名添加到Bloomfilter里面，作者所使用的是：&lt;a href=&quot;https://github.com/bitly/dablooms&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;dablooms&lt;/a&gt;，如果过滤器中已经存在了该签名，则把该签名放到一个map中叫做：potentialValues&lt;/li&gt;
&lt;li&gt;second pass：重新遍历signature，如果签名存在于potentialValues中，导出签名以及它的其他信息到map：rMap中&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
    
    </summary>
    
    
      <category term="Bitcoin" scheme="http://zzylydx.github.io/categories/Bitcoin/"/>
    
    
      <category term="blockchainr" scheme="http://zzylydx.github.io/tags/blockchainr/"/>
    
  </entry>
  
  <entry>
    <title>VerifyTransaction</title>
    <link href="http://zzylydx.github.io/2020/02/07/VerifyTransaction/"/>
    <id>http://zzylydx.github.io/2020/02/07/VerifyTransaction/</id>
    <published>2020-02-07T12:33:40.000Z</published>
    <updated>2020-02-07T13:31:27.420Z</updated>
    
    <content type="html"><![CDATA[<h2 id="比特币中的签名"><a href="#比特币中的签名" class="headerlink" title="比特币中的签名"></a>比特币中的签名</h2><p>签名存在于解锁脚本里面即ScriptSig，主要有身份认证，就是签名是用户使用私钥完成的，所以证明了花的钱是自己的，之后解锁脚本会去验证锁定脚本，进而解锁UTXO，所用到的也是sig和PubKey进行交易验证，验证成功即可完成交易产生新的UTXO。<br>那么在Bitcoin中验证交易的具体过程是怎样的呢？并且签名的类型也是多种：SIGHASH_ALL, SIGHASH_NONE, SIGHASH_SINGLE。今天我门主要探索的是SIGHASH_ALL中交易的验证过程。</p><a id="more"></a><h2 id="具体过程"><a href="#具体过程" class="headerlink" title="具体过程"></a>具体过程</h2><p>下图当成两张图片使用<br><img src="/images/TxPrev.png" alt="TxPrev and TxNew"></p><ul><li>创建subscript：从OP_CODESEPARATOR到脚本的最后<br><img src="/images/PrevTx_PKScript.png" alt="PrevTx_PKScript"></li><li>如果脚本中存在签名则移除</li><li>把操作码：OP_CODESEPARATORS从脚本中移除<br><img src="/images/remove_op.png" alt="remove"></li><li>把hashtype从签名中移除<br><img src="/images/hashtype.png" alt="hashtype"></li><li>复制一份TxNew命名为TxCopy</li><li>把TxCopy中的所有TxIn置空</li><li>复制Subscript到你要验证的TxIn中</li><li>序列化TxCopy并且扩展4字节hashTypeCode(使用的是sha256^2)</li><li>通过字符串验证签名(hash strings是big-endian)<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2>这一个比较细节的过程，希望以后能够用的到</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;比特币中的签名&quot;&gt;&lt;a href=&quot;#比特币中的签名&quot; class=&quot;headerlink&quot; title=&quot;比特币中的签名&quot;&gt;&lt;/a&gt;比特币中的签名&lt;/h2&gt;&lt;p&gt;签名存在于解锁脚本里面即ScriptSig，主要有身份认证，就是签名是用户使用私钥完成的，所以证明了花的钱是自己的，之后解锁脚本会去验证锁定脚本，进而解锁UTXO，所用到的也是sig和PubKey进行交易验证，验证成功即可完成交易产生新的UTXO。&lt;br&gt;那么在Bitcoin中验证交易的具体过程是怎样的呢？并且签名的类型也是多种：SIGHASH_ALL, SIGHASH_NONE, SIGHASH_SINGLE。今天我门主要探索的是SIGHASH_ALL中交易的验证过程。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Bitcoin" scheme="http://zzylydx.github.io/categories/Bitcoin/"/>
    
    
      <category term="verifytransaction" scheme="http://zzylydx.github.io/tags/verifytransaction/"/>
    
  </entry>
  
  <entry>
    <title>Bloom filter</title>
    <link href="http://zzylydx.github.io/2020/02/06/Bloomfilter/"/>
    <id>http://zzylydx.github.io/2020/02/06/Bloomfilter/</id>
    <published>2020-02-06T12:48:35.000Z</published>
    <updated>2020-02-07T11:52:27.359Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Bloom filter是一个数据结构，它可以用来判断某个元素是否在集合内，具有运行快速、内存占用小的特点。<br>而高效插入和查询的代价就是Bloom filter是一个基于概率的数据结构，它只能告诉我们一个元素绝对不在集合内或可能在集合内，而不能告诉我们一定在集合内。</p><a id="more"></a><h2 id="构成"><a href="#构成" class="headerlink" title="构成"></a>构成</h2><p>Bloom过滤器的实现是由⼀个可变⻓度（N）的二进制数组（N位⼆进制数构成⼀个位域）和数量可变（M）的一组哈希函数组成。这些哈希函数的输出值始终在1和N之间， 该数值与二进制数组相对应。 并且该函数为确定性函数， 也就是说任何一个使相同Bloom过滤器的节点通过该函数都能对特定输入得到同一个的结果。 Bloom过滤器的准确性和私密性能通过改变长度（N）和哈希函数的数量（M）来调节。<br><img src="/images/Bloomfilter.png" alt="Bloomfilter"></p><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>当Bloom过滤器中关键词增加时，它对应的某个哈希函数的输出值可能已经是1了，这种情况下，该位不会再次改变，所以会因为关键词的增加而导致准确性降低。</p><h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><p>我最近在做bitcoin中签名r的提取并作出比较，数据量非常大，所以我觉得使用Bloom filter会节省很大的时间，以后我要尝试一下。<br>今天学习到的一些东西：</p><ul><li>verify transaction具体的过程，近期更新</li><li>Brainwallets存在安全隐患，它的私钥是根据一串用户指定的字符哈希而来，PPT中说到它使用的是math.Random()，它的范围是0-1中的小数，而比特币钱包中私钥的生成是选取的不可预测或者不可重复的1-2^256中的随机数，之后我也会更新一下有关bitcoin中私钥公钥地址之间是怎样生成的。</li><li>发现了个新的东西：若k1-k2=c，且c已知，也可以造成泄漏，但是我还没看懂！看懂了再更新！</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;Bloom filter是一个数据结构，它可以用来判断某个元素是否在集合内，具有运行快速、内存占用小的特点。&lt;br&gt;而高效插入和查询的代价就是Bloom filter是一个基于概率的数据结构，它只能告诉我们一个元素绝对不在集合内或可能在集合内，而不能告诉我们一定在集合内。&lt;/p&gt;
    
    </summary>
    
    
      <category term="小知识" scheme="http://zzylydx.github.io/categories/%E5%B0%8F%E7%9F%A5%E8%AF%86/"/>
    
    
      <category term="Bloom" scheme="http://zzylydx.github.io/tags/Bloom/"/>
    
  </entry>
  
  <entry>
    <title>ECDSA</title>
    <link href="http://zzylydx.github.io/2020/02/05/ECDSA/"/>
    <id>http://zzylydx.github.io/2020/02/05/ECDSA/</id>
    <published>2020-02-05T12:01:26.000Z</published>
    <updated>2020-02-06T04:08:28.975Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>数字签名算法（DSA）在联邦信息处理标准FIPS中有详细论述，称为数字签名标准。它的安全性基于素域上的离散对数问题。椭圆曲线密码（ECC）由Neal Koblitz和Victor Miller于1985年发明。它可以看作是椭圆曲线对先前基于离散对数问题（DLP）的密码系统的模拟，只是群元素由素域中的元素数换为有限域上的椭圆曲线上的点。椭圆曲线密码体制的安全性基于椭圆曲线离散对数问题（ECDLP）的难解性。椭圆曲线离散对数问题远难于离散对数问题，椭圆曲线密码系统的单位比特强度要远高于传统的离散对数系统。因此在使用较短的密钥的情况下，ECC可以达到于DL系统相同的安全级别。这带来的好处就是计算参数更小，密钥更短，运算速度更快，签名也更加短小。因此椭圆曲线密码尤其适用于处理能力、存储空间、带宽及功耗受限的场合。</p><a id="more"></a><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>ECDSA是ECC与DSA的结合，整个签名过程与DSA类似，所不一样的是签名中采取的算法为ECC，最后签名出来的值也是分为r,s。</p><h2 id="椭圆曲线的参数"><a href="#椭圆曲线的参数" class="headerlink" title="椭圆曲线的参数"></a>椭圆曲线的参数</h2><p>椭圆曲线算法是工作在循环子群上的，因此需要如下几个参数：</p><ul><li>素数p，这个值定义了有限域的大小</li><li>椭圆曲线的系数a、b</li><li>基点G，也称生成元</li><li>子群的阶n</li><li>cofactor h (h = N/n)</li></ul><h2 id="KeyGen"><a href="#KeyGen" class="headerlink" title="KeyGen"></a>KeyGen</h2><ul><li>G为椭圆曲线上的点，q是由G所组成的有限循环群的阶</li><li>选取随机数x，x属于[1,q-1]</li><li>计算Q=xG</li><li>私钥为：x，公钥为：Q</li></ul><hr><h2 id="Sign对消息m签名"><a href="#Sign对消息m签名" class="headerlink" title="Sign对消息m签名"></a>Sign对消息m签名</h2><ul><li>选取随机数k，k属于[1,q-1]</li><li>计算R=kG=(Rx,Ry)以及r=Rx mod q</li><li>计算s=k^-1(H(m)+rx) mod q，若r=0或s=0，则另选随机数k，重新执行上面的过程</li><li>消息m的签名为(r,s)</li></ul><hr><h2 id="Verif"><a href="#Verif" class="headerlink" title="Verif"></a>Verif</h2><ul><li>计算u=s^-1H(m) mod q, v=rs^-1 mod q</li><li>计算(x1,y1)=uG+vQ，r1=x1 mod q</li><li>判断r和r1的关系，如果r=r1，则签名有效，否则签名无效</li></ul><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>不太会用Markdown的公式，所以先凑活写一下，以后会用了，再更新！</p><h2 id="ECDSA在Bitcoin中的应用"><a href="#ECDSA在Bitcoin中的应用" class="headerlink" title="ECDSA在Bitcoin中的应用"></a>ECDSA在Bitcoin中的应用</h2><p>主要应用于，transaction的签名，签名存放在解锁脚本的ScriptSig中，所以在签名中存在两个字段r，s。下面我们来具体分析下今天我看的东西。</p><h3 id="Signature"><a href="#Signature" class="headerlink" title="Signature"></a>Signature</h3><ul><li>选取一个随机数d，计算Publickey=dG</li><li>e=hash(message)</li><li>选取一个随机数k</li><li>(x,y)=kG，r=x</li><li>s=(e+rd)/k<br>sig:(r,s)</li></ul><hr><p>看着似乎没有什么问题，但是我们如果使用同一个随机数k，即k1=k2</p><ul><li>(x1,y1)=k1G</li><li>(x2,y2)=k2G</li></ul><hr><h2 id="因为k1-k2，所以x1-x2，y1-y2，所以r1-r2"><a href="#因为k1-k2，所以x1-x2，y1-y2，所以r1-r2" class="headerlink" title="因为k1=k2，所以x1=x2，y1=y2，所以r1=r2"></a>因为k1=k2，所以x1=x2，y1=y2，所以r1=r2</h2><ul><li>sig1:[r,(e1+rd)/k]</li><li>sig2:[r,(e2+rd)/k]</li><li>s1=(e1+rd)/k，s2=(e2+rd)/k</li><li>两个等式左右同时相减得到：s1-s2=(e1-e2)/k，即：k=(e1-e2)/(s1-s2)</li><li>得到k之后就可以计算：d=(s1k-e1)/r</li></ul><h2 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h2><p>综上所述，即可以得到私钥d，所以如果同一用户下的交易签名r字段相等，就可以得到私钥，进而造成账户金额被盗等重大问题，索尼以前就犯过这样的错误：PlayStation 3 只能运行被索尼的进行ECDSA签名的游戏。如果我想为PlayStation 3开发了一个新的游戏，除非我从索尼获得签名值，否则我及时发布了，也运行不了这个游戏。问题是，索尼签名时用了一个静态的k值而不是随机生成的。所以k的保密性非常重要，且random number也保证其唯一性。它只是介绍的在Bitcoin中，在其他的与Bitcoin相关的加密货币中是否也存在这样的情况，我还要进一步的研究，并且它只是考虑了在同一个用户下会出现这样的情况，那么在不同的用户呢，或者不仅仅是签名r相等呢！</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;数字签名算法（DSA）在联邦信息处理标准FIPS中有详细论述，称为数字签名标准。它的安全性基于素域上的离散对数问题。椭圆曲线密码（ECC）由Neal Koblitz和Victor Miller于1985年发明。它可以看作是椭圆曲线对先前基于离散对数问题（DLP）的密码系统的模拟，只是群元素由素域中的元素数换为有限域上的椭圆曲线上的点。椭圆曲线密码体制的安全性基于椭圆曲线离散对数问题（ECDLP）的难解性。椭圆曲线离散对数问题远难于离散对数问题，椭圆曲线密码系统的单位比特强度要远高于传统的离散对数系统。因此在使用较短的密钥的情况下，ECC可以达到于DL系统相同的安全级别。这带来的好处就是计算参数更小，密钥更短，运算速度更快，签名也更加短小。因此椭圆曲线密码尤其适用于处理能力、存储空间、带宽及功耗受限的场合。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Bitcoin" scheme="http://zzylydx.github.io/categories/Bitcoin/"/>
    
    
      <category term="ECDSA" scheme="http://zzylydx.github.io/tags/ECDSA/"/>
    
  </entry>
  
  <entry>
    <title>Zcash区块数据结构解析</title>
    <link href="http://zzylydx.github.io/2020/02/04/Zcash%E5%8C%BA%E5%9D%97%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%A7%A3%E6%9E%90/"/>
    <id>http://zzylydx.github.io/2020/02/04/Zcash%E5%8C%BA%E5%9D%97%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%A7%A3%E6%9E%90/</id>
    <published>2020-02-04T08:37:21.000Z</published>
    <updated>2020-02-04T10:10:19.185Z</updated>
    
    <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Zcash（ZEC）由Zooko Wilcox-O’Hearn于2016年推出，基于Zerocoin协议，Zcash（ZEC）是一种去中心化，开放源代码，以隐私为重点的加密货币，可实现交易的选择性透明化。Zcash交易可以是透明的，也可以通过称为zk-SNARKs的零知识证明来屏蔽。这允许网络维护余额的安全分类帐，而无需透露各方或涉及的金额。代替发布支出授权和交易值，对交易元数据进行加密，并使用zk-SNARK证明没有人是不诚实的。</p><a id="more"></a><h2 id="Zcash区块的结构"><a href="#Zcash区块的结构" class="headerlink" title="Zcash区块的结构"></a>Zcash区块的结构</h2><h3 id="结构图"><a href="#结构图" class="headerlink" title="结构图"></a>结构图</h3><p><img src="/images/Zcash_block.png" alt="Zcash_block"></p><h3 id="Block-Header"><a href="#Block-Header" class="headerlink" title="Block Header"></a>Block Header</h3><ul><li>nVersion：版本号。</li><li>hashPrevBlock：前一个区块的哈希值。</li><li>hashMerkleRoot：内部字节顺序的SHA-256d哈希。 merkle根源自此块中包含的所有事务的哈希值，从而确保在不修改header的情况下不能修改这些事务。</li><li>hashReserved /hashFinalSaplingRoot：</li><li>nTime：时间戳，旷工打包区块的时间。</li><li>nBits：工作量证明的难度目标。</li><li>nNonce：随机数，用于工作量证明，矿工可以更改其任意字段以修改标头哈希，以产生小于或等于目标阈值的哈希。</li><li>solutionSize：Equihash解决方案的大小（以字节为单位）。</li><li>solution：Equihash解决方案</li></ul><h3 id="transactions"><a href="#transactions" class="headerlink" title="transactions"></a>transactions</h3><ul><li>header：(version&gt;=1)</li><li>nVersionGroupId：版本组ID(version&gt;=3)</li><li>tx_in_count：此交易的输入数量(version&gt;=1)</li><li>tx_in：交易输入（与bitcoin类似）(version&gt;=1)</li><li>tx_out_count：此交易的输出数量(version&gt;=1)</li><li>tx_out：交易输出（与bitcoin类似）(version&gt;=1)</li><li>lock_time：锁定交易的时间(version&gt;=1)</li><li>nExpiryHeight：块高度在{1 .. 499999999}范围内，之后交易将到期，或者为0以禁用到期时间(version&gt;=3)</li><li>valueBalance：sapling花费的值减去output的值（对Zcash的交易过程不懂，所以不太懂这个的定义）(version&gt;=4)</li><li>nShieldedSpend：</li><li>vShieldedSpend：</li><li>nShieldedOutput：</li><li>vShieldedOutput：</li><li>nJoinSplit：</li><li>vJoinSplit：</li><li>vJoinSplit：</li><li>joinSplitPubKey：JoinSplitSig公共验证密钥的编码(version&gt;=2)</li><li>joinSplitSig：对整个TransacTion数据使用私钥进行的签名(version&gt;=2)</li><li>bindingSig：是整个Transaction数据的签名(verson&gt;=4)</li></ul><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>今天一开始想学习的是XRP（瑞波币），了解了一番，大体知道它的优点：</p><ul><li>打包一个区块的时间仅需几秒钟，而比特币需要10分钟</li><li>交易记录的确认方式更加快速，所有节点一起确认，仅仅需要3至5秒钟，而比特币是一个节点一个节点的确认，速度大大降低，需要40至50分钟<br>此外还了解到，XRP是一个去中心化、覆盖全货币币种的互联网金融交易系统，它的网关是资金进出如波系统的进出口，人们可以通过这个中介将各类货币注入或者抽离瑞波系统，它的货币供应量是1000亿。<br>本来是想先把它的区块结构图画出来的，结果寻找半天无果，我也想过通过分析源码找出结构代码，但是能力有限，好在Zcash有一篇白皮书让我找到了，这才得到了区块结构，慢慢深入了解Zcash的交易过程吧，进而完善blog！</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;Zcash（ZEC）由Zooko Wilcox-O’Hearn于2016年推出，基于Zerocoin协议，Zcash（ZEC）是一种去中心化，开放源代码，以隐私为重点的加密货币，可实现交易的选择性透明化。Zcash交易可以是透明的，也可以通过称为zk-SNARKs的零知识证明来屏蔽。这允许网络维护余额的安全分类帐，而无需透露各方或涉及的金额。代替发布支出授权和交易值，对交易元数据进行加密，并使用zk-SNARK证明没有人是不诚实的。&lt;/p&gt;
    
    </summary>
    
    
      <category term="区块结构" scheme="http://zzylydx.github.io/categories/%E5%8C%BA%E5%9D%97%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="Zcash" scheme="http://zzylydx.github.io/tags/Zcash/"/>
    
  </entry>
  
  <entry>
    <title>ETH区块数据结构解析</title>
    <link href="http://zzylydx.github.io/2020/02/01/ETH%E5%8C%BA%E5%9D%97%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%A7%A3%E6%9E%90/"/>
    <id>http://zzylydx.github.io/2020/02/01/ETH%E5%8C%BA%E5%9D%97%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%A7%A3%E6%9E%90/</id>
    <published>2020-02-01T12:50:49.000Z</published>
    <updated>2020-02-02T13:31:59.546Z</updated>
    
    <content type="html"><![CDATA[<h2 id="区块的源码"><a href="#区块的源码" class="headerlink" title="区块的源码"></a>区块的源码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">// Block represents an entire block in the Ethereum blockchain.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">type Block <span class="class"><span class="keyword">struct</span> &#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    header       *Header</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    uncles       []*Header</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    transactions Transactions</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// caches</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    hash atomic.Value</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">size</span> atomic.Value</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// Td is used by package core to store the total difficulty</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// of the chain up to and including the block.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">    td *big.Int</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"> </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// These fields are used by package eth to track</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// inter-peer block relay.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">    ReceivedAt   time.Time</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">    ReceivedFrom interface&#123;&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><a id="more"></a><ul><li>header：区块头，包含该区块的信息</li><li>uncles：该区块所包含的叔块的信息</li><li>transactions：该区块包含的交易信息</li><li>td：总难度，即从开始区块到本区块（包括本区块）所有的难度的累加</li><li>ReceivedAt：用于跟踪区块的生成  </li><li>ReceivedFrom：用于跟踪区块的生成</li></ul><h2 id="结构图："><a href="#结构图：" class="headerlink" title="结构图："></a>结构图：</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">type Header <span class="class"><span class="keyword">struct</span> &#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    ParentHash  common.Hash    `json:<span class="string">"parentHash"</span>       gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    UncleHash   common.Hash    `json:<span class="string">"sha3Uncles"</span>       gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    Coinbase    common.Address `json:<span class="string">"miner"</span>            gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    Root        common.Hash    `json:<span class="string">"stateRoot"</span>        gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    TxHash      common.Hash    `json:<span class="string">"transactionsRoot"</span> gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    ReceiptHash common.Hash    `json:<span class="string">"receiptsRoot"</span>     gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    Bloom       Bloom          `json:<span class="string">"logsBloom"</span>        gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    Difficulty  *big.Int       `json:<span class="string">"difficulty"</span>       gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    Number      *big.Int       `json:<span class="string">"number"</span>           gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    GasLimit    uint64         `json:<span class="string">"gasLimit"</span>         gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    GasUsed     uint64         `json:<span class="string">"gasUsed"</span>          gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">    Time        *big.Int       `json:<span class="string">"timestamp"</span>        gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    Extra       []<span class="keyword">byte</span>         `json:<span class="string">"extraData"</span>        gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    MixDigest   common.Hash    `json:<span class="string">"mixHash"</span>          gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">    Nonce       BlockNonce     `json:<span class="string">"nonce"</span>            gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">type Body <span class="class"><span class="keyword">struct</span> &#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">    Transactions []*Transaction</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    Uncles       []*Header</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><p><img src="/images/ETH_block.png" alt="ETH_block"></p><h3 id="各部分代表的含义"><a href="#各部分代表的含义" class="headerlink" title="各部分代表的含义"></a>各部分代表的含义</h3><ul><li>ParentHash：父区块的哈希值</li><li>UncleHash：上面提到的uncles的RLP哈希值，uncles是一个Header数组</li><li>Coinbase：挖出该区块矿工的地址，矿工费和挖出区块的奖励会发放到该地址</li><li>Root：存储账户状态的Merkle树的根节点的哈希</li><li>TxHash：存储该区块中交易的Merkle树的根节点的哈希</li><li>ReceiptHash：存储该区块的交易的回单的Merkle树的根节点的哈希，Block的所有Transaction执行完后会生成一个Receipt数组</li><li>Bloom：交易日志的布隆过滤器，用于查询</li><li>Difficulty：区块的难度</li><li>Number：区块高度</li><li>Time：挖出该区块的时间戳</li><li>GasLimit：区块内所有Gas消耗的上限</li><li>GasUsed：执行区块内所有Transaction实际消耗的Gas总和</li><li>Nonce：一个64bit的哈希数，用于工作量证明</li><li>mixDigest：该哈希值与Nonce值一起证明该区块上已经进行了足够的计算，用于证明挖矿成功</li><li>Extra：预留备用</li></ul><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>以太坊各个方面我也不太清楚，只能靠着自己了解的写一下，transaction的结构图没有给出，慢慢来吧，等我了解清楚再更新！</p><h2 id="Transaction"><a href="#Transaction" class="headerlink" title="Transaction"></a>Transaction</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">//core/types/transaction.go</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">type Transaction <span class="class"><span class="keyword">struct</span> &#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    data txdata</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// caches</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    hash atomic.Value</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">size</span> atomic.Value</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    from atomic.Value</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">type txdata <span class="class"><span class="keyword">struct</span> &#123;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    AccountNonce uint64          `json:<span class="string">"nonce"</span>    gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    Price        *big.Int        `json:<span class="string">"gasPrice"</span> gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">    GasLimit     uint64          `json:<span class="string">"gas"</span>      gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    Recipient    *common.Address `json:<span class="string">"to"</span>       rlp:<span class="string">"nil"</span>` <span class="comment">// nil means contract creation</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    Amount       *big.Int        `json:<span class="string">"value"</span>    gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">    Payload      []<span class="keyword">byte</span>          `json:<span class="string">"input"</span>    gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// Signature values</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    V *big.Int `json:<span class="string">"v"</span> gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">    R *big.Int `json:<span class="string">"r"</span> gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    S *big.Int `json:<span class="string">"s"</span> gencodec:<span class="string">"required"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">// This is only used when marshaling to JSON.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">    Hash *common.Hash `json:<span class="string">"hash"</span> rlp:<span class="string">"-"</span>`</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure><p><img src="/images/ETH_transaction.png" alt="ETH_transaction"></p><h3 id="trsansaction及txdata中各个部分的含义"><a href="#trsansaction及txdata中各个部分的含义" class="headerlink" title="trsansaction及txdata中各个部分的含义"></a>trsansaction及txdata中各个部分的含义</h3><h4 id="transaction"><a href="#transaction" class="headerlink" title="transaction"></a>transaction</h4><ul><li>data 它的格式是txdata，是交易所包含的数据txdata中详细讲</li><li>hash、size、from是缓存</li></ul><h4 id="txdata"><a href="#txdata" class="headerlink" title="txdata"></a>txdata</h4><ul><li>AccountNonce：此交易的发送者已发送过的交易数</li><li>Price：此交易的 gas price</li><li>GasLimit：本交易允许消耗的最大 gas 数量</li><li>Recipient：交易的接收者地址</li><li>Amount：交易转移的以太币数量，单位是 wei</li><li>Payload：交易可以携带的数据，在不同类型的交易中有不同的含义</li><li>V R S：交易的签名数据</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>我感觉ETH的整个交易过程好复杂，没有静下心来好好研究下，有很多东西也是一窍不通，通过以上的总结，以太坊的区块结构大体解析的差不多了，还有很多东西值得研究，比如它使用的树的结构：Merkle-PatriciaTrie，以后再细细品味吧！</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;区块的源码&quot;&gt;&lt;a href=&quot;#区块的源码&quot; class=&quot;headerlink&quot; title=&quot;区块的源码&quot;&gt;&lt;/a&gt;区块的源码&lt;/h2&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Block represents an entire block in the Ethereum blockchain.&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;type Block &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    header       *Header&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    uncles       []*Header&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    transactions Transactions&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// caches&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    hash atomic.Value&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;size&lt;/span&gt; atomic.Value&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Td is used by package core to store the total difficulty&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// of the chain up to and including the block.&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    td *big.Int&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// These fields are used by package eth to track&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// inter-peer block relay.&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    ReceivedAt   time.Time&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;    ReceivedFrom interface&amp;#123;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="区块结构" scheme="http://zzylydx.github.io/categories/%E5%8C%BA%E5%9D%97%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="ETH" scheme="http://zzylydx.github.io/tags/ETH/"/>
    
  </entry>
  
  <entry>
    <title>Hexo next主题中添加播放器Aplayer</title>
    <link href="http://zzylydx.github.io/2020/01/31/Hexo%20next%E4%B8%BB%E9%A2%98%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%92%AD%E6%94%BE%E5%99%A8Aplayer/"/>
    <id>http://zzylydx.github.io/2020/01/31/Hexo%20next%E4%B8%BB%E9%A2%98%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%92%AD%E6%94%BE%E5%99%A8Aplayer/</id>
    <published>2020-01-31T08:18:49.000Z</published>
    <updated>2020-01-31T08:25:07.808Z</updated>
    
    <content type="html"><![CDATA[<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><ul><li>首先，先下载Aplayer源码：<a href="https://github.com/MoePlayer/APlayer" target="_blank" rel="noopener">APlayer</a></li></ul><h2 id="dist文件夹"><a href="#dist文件夹" class="headerlink" title="dist文件夹"></a>dist文件夹</h2><ul><li>再将文件中的dist文件夹复制到路径：<code>blog/themes/next/source</code>（我的next版本是7.5）<a id="more"></a></li></ul><h2 id="新建music-js"><a href="#新建music-js" class="headerlink" title="新建music.js"></a>新建music.js</h2><ul><li>在目录<code>blog/themes/next/source/dist</code>下添加music.js文件<br>内容是：</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ap = <span class="keyword">new</span> APlayer(&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    container: document.getElementById('aplayer'),</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    fixed: <span class="literal">true</span>,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    autoplay: <span class="literal">true</span>,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    audio: [</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">  &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        name: '勇气',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">        artist: '棉子',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">        url: 'http://music.163.com/song/media/outer/url?id=1411358329.mp3',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        cover: '/images/5.jpg',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">      &#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">      &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">        name: <span class="string">"星星"</span>,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">        artist: '张杰',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">        url: 'http://music.163.com/song/media/outer/url?id=1399004693.mp3',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">        cover: '/images/xingxing.jpg',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">      &#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">      &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">        name: '这就是爱吗',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">        artist: '十豆',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">        url: 'http://music.163.com/song/media/outer/url?id=1412242872.mp3',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">        cover: '/images/zjsam.jpg',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">      &#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">      &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">        name: 'Alone',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">        artist: 'Alan Walker / Noonie Bao',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">        url: 'http://music.163.com/song/media/outer/url?id=444269135.mp3',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">        cover: '/images/alone.jpg',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">      &#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">  &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">        name: 'Umbrella (Matte Remix)',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">        artist: 'Matte / Ember Island',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">        url: 'http://music.163.com/song/media/outer/url?id=164209623.mp3',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">        cover: '/images/1.jpg',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">      &#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">  &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">        name: '大眠 (完整版)原唱：王心凌',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line">        artist: '小乐哥',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">        url: 'http://music.163.com/song/media/outer/url?id=3778678.mp3',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">        cover: '/images/2.jpg',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line">      &#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line">  &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line">        name: '世间美好与你环环相扣',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">44</span></pre></td><td class="code"><pre><span class="line">        artist: '柏松',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">45</span></pre></td><td class="code"><pre><span class="line">        url: 'http://music.163.com/song/media/outer/url?id=1363948882.mp3',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">46</span></pre></td><td class="code"><pre><span class="line">        cover: '/images/3.jpg',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">47</span></pre></td><td class="code"><pre><span class="line">      &#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">48</span></pre></td><td class="code"><pre><span class="line">  &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">49</span></pre></td><td class="code"><pre><span class="line">        name: <span class="string">'飞'</span>,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">50</span></pre></td><td class="code"><pre><span class="line">        artist: '王恩信Est / 二胖u',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">51</span></pre></td><td class="code"><pre><span class="line">        url: 'http://music.163.com/song/media/outer/url?id=1386259535.mp3',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">52</span></pre></td><td class="code"><pre><span class="line">        cover: '/images/4.jpg',</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">53</span></pre></td><td class="code"><pre><span class="line">      &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">54</span></pre></td><td class="code"><pre><span class="line">    ]</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">55</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr></table></figure><hr><p>注：里面的代码可以修改，歌曲信息需要手动添加：</p><ul><li>name：歌曲名称</li><li>artist：作者</li><li>url：连接（具体怎样操作看下面步骤）</li><li>cover：是图片连接，可以是本地图片，也可以是在线图片，本地放在<code>source/images</code>然后修改路径即可</li></ul><hr><h2 id="url添加歌曲方法"><a href="#url添加歌曲方法" class="headerlink" title="url添加歌曲方法"></a>url添加歌曲方法</h2><ul><li>网易云网页播放一首歌曲</li><li>将网址中的id复制例：<code>https://music.163.com/#/song?id=1411358329</code></li><li>将下面代码中的id修改为你想添加歌曲的id：<code>http://music.163.com/song/media/outer/url?id=.mp3</code></li></ul><h2 id="修改文件-layout-swig"><a href="#修改文件-layout-swig" class="headerlink" title="修改文件_layout.swig"></a>修改文件_layout.swig</h2><p>在路径：<code>blog/themes/next/layout</code>下找到_layout.swig文件，然后将下面的代码添加到：<code>&lt;body itemscope ...&gt;</code>在body里面就可以</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"/dist/APlayer.min.css"</span>&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"aplayer"</span>&gt;&lt;/div&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"/dist/APlayer.min.js"</span>&gt;&lt;/script&gt;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"/dist/music.js"</span>&gt;&lt;/script&gt;</span></pre></td></tr></table></figure><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>然后<code>hexo g</code>再<code>hexo d</code>在网页的左下角就可以看到了，大功告成！</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;首先，先下载Aplayer源码：&lt;a href=&quot;https://github.com/MoePlayer/APlayer&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;APlayer&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;dist文件夹&quot;&gt;&lt;a href=&quot;#dist文件夹&quot; class=&quot;headerlink&quot; title=&quot;dist文件夹&quot;&gt;&lt;/a&gt;dist文件夹&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;再将文件中的dist文件夹复制到路径：&lt;code&gt;blog/themes/next/source&lt;/code&gt;（我的next版本是7.5）
    
    </summary>
    
    
      <category term="Hexo" scheme="http://zzylydx.github.io/categories/Hexo/"/>
    
    
      <category term="hexo" scheme="http://zzylydx.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>从Bitcoin中提取部分签名字段R（1）</title>
    <link href="http://zzylydx.github.io/2020/01/22/%E4%BB%8EBitcoin%E4%B8%AD%E6%8F%90%E5%8F%96%E9%83%A8%E5%88%86%E7%AD%BE%E5%90%8D%E5%AD%97%E6%AE%B5R1/"/>
    <id>http://zzylydx.github.io/2020/01/22/%E4%BB%8EBitcoin%E4%B8%AD%E6%8F%90%E5%8F%96%E9%83%A8%E5%88%86%E7%AD%BE%E5%90%8D%E5%AD%97%E6%AE%B5R1/</id>
    <published>2020-01-22T14:06:35.000Z</published>
    <updated>2020-01-29T09:22:07.950Z</updated>
    
    <content type="html"><![CDATA[<h2 id="有关Bitcoin中部分签名的提取"><a href="#有关Bitcoin中部分签名的提取" class="headerlink" title="有关Bitcoin中部分签名的提取"></a>有关Bitcoin中部分签名的提取</h2><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>&ensp;&ensp;&ensp;&ensp;刚刚接触Bitcoin Wallet 里面的构造还不是很清楚，提取和解析指令也不是很熟悉，所以听到这个题目，有些无从下手，于是我先熟悉了bitcoin-cli的指令，例如：getblockhash + 区块高度、getblock + blockhash、getrawtransaction + Tx、decoderawtransaction + (getrawtransaction所获得的字符串)，想要获得签名r主要是通过这些指令，之后我学习了解析交易字符串后的各部分所代表的含义，通过学习精通比特币，我了解到在交易过程中，存在解锁脚本和锁定脚本，结合解析出的信息，我发现里面存在scriptSig这个字段名，但是里面存在两个字段：asm和hex，深入了解后发现，hex代表的是签名脚本的16进制字符串，至此我找到了目标提取字符串。下面具体介绍提取过程。</p><a id="more"></a><h3 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h3><p>&ensp;&ensp;&ensp;&ensp;提取出比特币钱包所有签名字段中的r，并找到相同的签名r。</p><h3 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h3><h5 id="UTXO"><a href="#UTXO" class="headerlink" title="UTXO"></a>UTXO</h5><p>&ensp;&ensp;&ensp;&ensp;比特币交易的基本单位是未经使用的一个交易输出UTXO。它是不可再分割的，在比它的金额还小的交易中就会存在找零行为，即会产生多个输出。实际上，并不存在存储比特币账户金额的地点，只有被所有者锁住的、分散在比特币网络中的UTXO。</p><h5 id="锁定脚本"><a href="#锁定脚本" class="headerlink" title="锁定脚本"></a>锁定脚本</h5><p>&ensp;&ensp;&ensp;&ensp;放在交易输出上的一个障碍，给出了花费UTXO的条件，一般包含条件操作符和限定公钥。</p><h5 id="解锁脚本"><a href="#解锁脚本" class="headerlink" title="解锁脚本"></a>解锁脚本</h5><p>&ensp;&ensp;&ensp;&ensp;是一个满足是锁定脚本限定条件的脚本，从而允许锁定的UTXO被花费，它也是交易输出的一部分，一般包含数字签名和对应公钥。</p><h6 id="比特币交易的具体过程"><a href="#比特币交易的具体过程" class="headerlink" title="比特币交易的具体过程"></a>比特币交易的具体过程</h6><p><img src="https://img-blog.csdnimg.cn/20200117231437525.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MzI0MDU3,size_16,color_FFFFFF,t_70" alt="Transaction"><br>&ensp;&ensp;&ensp;&ensp;当userB给userC发送btc时，会新产生UTXO，观察图中的橙色连线，我们发现，新产生的UTXO中的in中scriptSig的公钥与之前的UTXO中scriptPubKey的公钥相同，其实在交易的过程中，解锁脚本需要满足未花费UTXO锁定脚本的条件，通过脚本语言验证，也就是之前交易的输出，证明是其拥有者，即可将其中的比特币调出，生成新的交易输出。所以交易过程中签名就存放在解锁脚本里面，后面通过解析交易字符串，我们就可以明确的找到scriptSig的所在了。</p><h5 id="ECDSA"><a href="#ECDSA" class="headerlink" title="ECDSA"></a>ECDSA</h5><p>&ensp;&ensp;&ensp;&ensp;在比特币系统中，所采用的是椭圆曲线数字签名算法来对交易进行签名。签名会产生两部分：r、s</p><h5 id="解析交易字符串及部分字段的含义"><a href="#解析交易字符串及部分字段的含义" class="headerlink" title="解析交易字符串及部分字段的含义"></a>解析交易字符串及部分字段的含义</h5><p><img src="https://img-blog.csdnimg.cn/20200117231828793.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MzI0MDU3,size_16,color_FFFFFF,t_70" alt="scriptSig"><br>vin：交易输入数组<br>&ensp;&ensp;txid：交易ID<br>&ensp;&ensp;vout：交易输出序号<br>&ensp;&ensp;&ensp;&ensp;scriptSig：签名脚本<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;asm：签名脚本的汇编码<br>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;hex：签名脚本的16进制字符串表示<br>&ensp;&ensp;sequence：输入序列号<br>发现scriptSig中存在两个字段asm和hex，签名r到底在哪个字段里面呢？</p><h5 id="Transaction字符串的详解含义图"><a href="#Transaction字符串的详解含义图" class="headerlink" title="Transaction字符串的详解含义图"></a>Transaction字符串的详解含义图</h5><p><img src="https://img-blog.csdnimg.cn/20200117232116798.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MzI0MDU3,size_16,color_FFFFFF,t_70" alt="TransactionAll"><br><strong>ScriptSig</strong><br><img src="https://img-blog.csdnimg.cn/20200117232230699.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MzI0MDU3,size_16,color_FFFFFF,t_70" alt="ScriptSig"><br>&ensp;&ensp;&ensp;&ensp;Lr的含义是签名r的长度，且每个小长方形代表两个字符，所以我们可以通过计算得到签名r的长度，从而可从字符串中截取出来。<br><strong>举个实例看一下：</strong><br>hex<br>4830450221<strong>00d71db39ae4f6bc3128d78661f6951bb17b097ab32e1ead3ce6fe761914715dd5</strong>02201970b34d36a9fef053b8b7a3c4555ef5bba14a88992449b980aee862465d966e01410404ac8c30c4e85f47702bfa8d8d56d8e614258958d6655611474da6cadb8c73195dc7951db3466caabd256ebc9f6ef87fcdb597b6cb048dd1bbf011713690ba19<br>其中黑体部分就是签名字段中的R<br>&ensp;&ensp;&ensp;&ensp;<strong>Lr=οχ21⟹32byte⇒32×8=256bit⇒256÷4=64</strong><br>&ensp;&ensp;&ensp;&ensp;所以可以得出签名r的长度是64，即在21之后的64个字符为签名r<br>至此，我们找到了需要提取的内容，我们可以通过编写脚本语言将其导出，但是截止2020年1月10日，整个比特币钱包的大小为300G，所拥有的的区块数目是612345，数据量较大，不容易导出。</p><h3 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h3><p>&ensp;&ensp;&ensp;&ensp;主要任务就是将数据导出，刚开始没有一点思路，慢慢地发现可以通过编写python代码，将数据导入到指定文件中去，一开始我是直接在服务器上写代码，将hex导出到文件中去，但是不知道如何将文件放到本地，并且通过指令操作文件、运行代码比较麻烦，就找到了另外一种方法，pycharm可以连接到服务器，可以对服务器上代码以及文件直接操作即可，但是比特币网络中的数据量太大，想要导出签名所需要耗费的时间太多，目前我只导出了前610000个区块的tx，后续导出签名的代码出现问题，还在修改中，希望能尽快导出所有的签名R。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;有关Bitcoin中部分签名的提取&quot;&gt;&lt;a href=&quot;#有关Bitcoin中部分签名的提取&quot; class=&quot;headerlink&quot; title=&quot;有关Bitcoin中部分签名的提取&quot;&gt;&lt;/a&gt;有关Bitcoin中部分签名的提取&lt;/h2&gt;&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;&amp;ensp;&amp;ensp;&amp;ensp;&amp;ensp;刚刚接触Bitcoin Wallet 里面的构造还不是很清楚，提取和解析指令也不是很熟悉，所以听到这个题目，有些无从下手，于是我先熟悉了bitcoin-cli的指令，例如：getblockhash + 区块高度、getblock + blockhash、getrawtransaction + Tx、decoderawtransaction + (getrawtransaction所获得的字符串)，想要获得签名r主要是通过这些指令，之后我学习了解析交易字符串后的各部分所代表的含义，通过学习精通比特币，我了解到在交易过程中，存在解锁脚本和锁定脚本，结合解析出的信息，我发现里面存在scriptSig这个字段名，但是里面存在两个字段：asm和hex，深入了解后发现，hex代表的是签名脚本的16进制字符串，至此我找到了目标提取字符串。下面具体介绍提取过程。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Bitcoin" scheme="http://zzylydx.github.io/categories/Bitcoin/"/>
    
    
      <category term="Bitcoin" scheme="http://zzylydx.github.io/tags/Bitcoin/"/>
    
  </entry>
  
  <entry>
    <title>Bitcoin 区块结构解析</title>
    <link href="http://zzylydx.github.io/2020/01/22/bitcoin%E5%8C%BA%E5%9D%97%E7%BB%93%E6%9E%84/"/>
    <id>http://zzylydx.github.io/2020/01/22/bitcoin%E5%8C%BA%E5%9D%97%E7%BB%93%E6%9E%84/</id>
    <published>2020-01-22T13:50:49.000Z</published>
    <updated>2020-02-01T11:40:15.430Z</updated>
    
    <content type="html"><![CDATA[<h2 id="区块的结构"><a href="#区块的结构" class="headerlink" title="区块的结构"></a>区块的结构</h2><p>区块分为：区块头和区块体</p><a id="more"></a><h4 id="区块头"><a href="#区块头" class="headerlink" title="区块头"></a>区块头</h4><p>区块头包括三组元数据：</p><ul><li>用于连接前面的区块、索引自父区块哈希值的数据。</li><li>挖矿难度、Nonce（随机数，用于工作量证明算法的随机数）、时间戳（当前区块的生成时间）</li><li>能够总结并快速归纳校验区块中所有交易数据的Merkle树根</li></ul><h4 id="区块体"><a href="#区块体" class="headerlink" title="区块体"></a>区块体</h4><p>主要包含交易数据tx</p><h4 id="区块结构图："><a href="#区块结构图：" class="headerlink" title="区块结构图："></a>区块结构图：</h4><p><img src="https://img-blog.csdnimg.cn/20200122235043793.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1MzI0MDU3,size_16,color_FFFFFF,t_70" alt="block"></p><h4 id="交易结构图："><a href="#交易结构图：" class="headerlink" title="交易结构图："></a>交易结构图：</h4><p><img src="/images/transaction.png" alt="transaction"></p><h4 id="区块的第一笔交易：coinbase交易结构"><a href="#区块的第一笔交易：coinbase交易结构" class="headerlink" title="区块的第一笔交易：coinbase交易结构"></a>区块的第一笔交易：coinbase交易结构</h4><p><img src="/images/coinbase.png" alt="coinbase"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>2020.1.16——2020.1.23<br>这段时间主要完成了Bitcoin结构的分析及作图、和对前面提取签名工作的总结，目前代码编写出现问题，需要花时间去找到方法解决，之后会继续更新其他具有隐私保护能力的密码货币的区块结构图。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;区块的结构&quot;&gt;&lt;a href=&quot;#区块的结构&quot; class=&quot;headerlink&quot; title=&quot;区块的结构&quot;&gt;&lt;/a&gt;区块的结构&lt;/h2&gt;&lt;p&gt;区块分为：区块头和区块体&lt;/p&gt;
    
    </summary>
    
    
      <category term="区块结构" scheme="http://zzylydx.github.io/categories/%E5%8C%BA%E5%9D%97%E7%BB%93%E6%9E%84/"/>
    
    
      <category term="Bitcoin" scheme="http://zzylydx.github.io/tags/Bitcoin/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://zzylydx.github.io/2019/12/01/hello-world/"/>
    <id>http://zzylydx.github.io/2019/12/01/hello-world/</id>
    <published>2019-12-01T06:58:36.193Z</published>
    <updated>2020-01-29T09:21:47.064Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span></pre></td></tr></table></figure><a id="more"></a><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">$ hexo server</span></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">$ hexo generate</span></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
  </entry>
  
</feed>
